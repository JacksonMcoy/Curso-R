---
title: "Cadenas, factores y tablas"
output: 
  html_notebook: 
    highlight: tango
    theme: united
---

## Cadenas

Los datos de texto se almacenan en vectores de caracteres (o, menos comúnmente, en matrices de caracteres). Cada elemento de un vector de caracteres es una cadena completa, en lugar de un solo carácter. El hecho de que la unidad básica de texto sea un vector de caracteres significa que la mayoría de las funciones de manipulación de cadenas operan sobre vectores de cadenas, de la misma manera que las operaciones matemáticas son vectorizadas.

Los vectores de caracteres se pueden crear con la función `c` y podemos usar  comillas simples o dobles alrededor de nuestras cadenas, siempre y cuando coincidan.

```{r}
c(
  "Habia una vez un lenguaje de programacion que quiso ser amigo de todos",
  'Pasado el tiempo el lenguaje conocio a muchos amigos y fue feliz'
)
```


La función `paste` combina  cadenas juntas, cada vector que se pasa a él tiene sus elementos reciclado para alcanzar la longitud de la entrada más larga y luego las cadenas se concatenan, con un espacio que las separa. Podemos cambiar el separador pasando un argumento llamado `sep`  o usar la función relacionada `paste0` para no tener ningún separador. Después de combinar todas las cadenas, el resultado puede ser plegado  en una cadena contiene todo los objetos usando el argumento `collapse`:

```{r}
paste(c("red", "yellow"), "lorry")
paste(c("red", "yellow"), "lorry", sep = "-")
```


```{r}
paste(c("red", "yellow"), "lorry", collapse = ", ")
paste0(c("red", "yellow"), "lorry")
```

La función `toString` es una variación de  `paste` que es útil para imprimir vectores. Esta función  separa cada elemento con una coma y un espacio, y podemos limitar cuánto imprimimos. En el ejemplo siguiente, por ejemplo `width = 40` limita la salida a 40 caracteres:

```{r}
x <- (1:15) ^ 3
toString(x)
```

```{r}
toString(x, width = 40)
```

`cat` es una función de bajo nivel que funciona de manera similar a `paste`, pero con menos formato. Rara vez necesitaras  llamar directamente a esta función, pero vale la pena ser consciente, ya que es la base de la mayoría de las funciones de impresión. `cat` también puede aceptar un argumento para escribir su salida en un archivo:

```{r}
cat(c("C++", "Python"), "Java")
```
Por lo general, cuando las cadenas se imprimen en la consola se muestran entre comillas dobles. Envolviendo una variable en una llamada a la función `noquote`, podemos suprimir esas comillas. Esto puede hacer que el texto sea más legible en algunos casos:


```{r}
x<- c(
   "Python", "R", "a", "R", "bash", "Javascript", "git",
   "R", "Java", "C", "R", "I", "c++", "R"
)
y <- noquote(x)
x
```
```{r}
y
```

Existen varias funciones para dar formato a los números. `formatC `utiliza especificaciones de formato de estilo C que permiten especificar el formato del número de lugares decimales y el ancho de la salida. Cualquiera que sea la opción, la entrada debe ser uno de los tipos numéricos (incluidos los arrays) y la salida es un vectorde caracteres o una matriz:

```{r}
pot <- 1:3
(pot_de_e <- exp(pot))
formatC(pot_de_e)
```
```{r}
formatC(pot_de_e, digits = 3)
```


```{r}
formatC(pot_de_e, digits = 3, width = 10)
```

```{r}
formatC(pot_de_e, digits = 3, format = "e") # formato cientifico
```

```{r}
formatC(pot_de_e, digits = 3, flag= "+")
```

R también proporciona un formato de estilo C  más general con la función `sprintf`que funciona  de la misma manera que `sprintf` en cualquier otro lenguaje de programación: el primer argumento contiene marcadores de posición para las variables de cadena o número y los argumentos se sustituyen en esos marcadores de posición. Sólo recuerde que la mayoría de los números en R son valores de punto flotante en lugar de enteros.

El primer argumento de `sprintf` especifica una cadena de formato, con marcadores de posición para otros valores. Por ejemplo, `% s` indica otra cadena, `% f` y `% e` indican un número de coma flotante en formato fijo o científico, respectivamente  y `%d` representa un número entero. 

Los argumentos adicionales especifican los valores para reemplazar los marcadores de posición. Al igual que con la función `paste`, las entradas más cortas se reciclan para que coincidan con la entrada más larga:

```{r}
sprintf("%s %d = %f", "constante de Euler a la potencia", pot, pot_de_e)
```

```{r}
sprintf("Tres lugares decimales, e ^ %d = %.3f", pot, pot_de_e)

```
```{r}
sprintf("En notacion cientifica, e ^ %d = %e", pot, pot_de_e)
```

Sintaxis alternativas para el formato de números se proporcionan con `format` y `prettyNum`.

`format`  proporciona una sintaxis ligeramente diferente para el formato de cadenas y tiene un uso similar a `formatC`. `prettyNum`, por otro lado, es adecuado para  números muy grandes o muy pequeños:

```{r}
format(pot_de_e)

format(pot_de_e, digits = 3) 
format(pot_de_e, digits = 3, scientific  = TRUE) 

```

```{r}
prettyNum(
  c(1e10, 1e-20),
  big.mark = ",",
  small.mark = " ",
  preserve.width = "individual",
  scientific = FALSE
)
```

Hay algunos caracteres especiales que se pueden incluir en cadenas. Por ejemplo, podemos insertar un carácter de tabulación usando `\t`. Para ellos usamos `cat` en lugar de `print`, ya que `print` realiza una conversión extra para convertir `\t` desde un tab  en una barra invertida y una `t`. El argumento `fill = TRUE` hace que `cat` mueva el cursor a una nueva linea después de que haya terminado:


```{r}
cat("foo\tbar", fill = TRUE)
```


Moviendo el cursor a una nueva linea se hace con el caracter de nueva linea `\n`

```{r}
cat("foo\nbar", fill = TRUE)
```
Los caracteres nulos, `\0`, se utilizan para terminar cadenas en el código interno de R. Es un error intentar explícitamente incluirlos en una cadena.

```{r}
cat("foo\0bar", fill = TRUE) # lanza un error
```

Los caracteres de barra invertida deben duplicarse para que no se confundan con un carácter especial. En este ejemplo siguiente, las dos barras invertidas hacen sólo una barra invertida en la cadena resultante:

```{r}
cat("foo\\bar", fill = TRUE)
```

Si utilizamos comillas dobles alrededor de una cadena, los caracteres de comillas dobles deben estar precedidos por una barra invertida para que se puedan mostrar en la salida. Del mismo modo, si usamos comillas simples alrededor de una  cadenas, entonces los caracteres de comillas sueltas deben ser mostrados colocando una barra invertida:


```{r}
cat("foo\"bar", fill = TRUE)
cat('foo\'bar', fill = TRUE)
```

Para el caso inverso, se tiene lo siguiente

```{r}
cat("foo'bar", fill = TRUE)
cat('foo"bar', fill = TRUE)
```

Podemos hacer que nuestro ordenador emita un pitido al imprimir un carácter de alarma `\a` aunque la  función  `alarm` puede hacer esto de una manera más legible. Esto puede ser útil para que al final de un largo análisis  notificarnos que se ha terminado.

```{r}
cat("\a")
alarm()
```


Las cadenas  pueden convertir  todos sus valores en mayúsculas o minúsculas utilizando las funciones `toupper` y `tolower`

```{r}
toupper("Bienvenidos al Curso de R")
tolower("PYTHON y R son Lenguajes Amigos")
```

Hay dos funciones para extraer subcadenas: `substring` y `substr` que se comportan de maneras ligeramente diferentes cuando pasas vectores de diferentes longitudes como argumentos. Para `substring`  la salida es de longitud igual que la mayor longitud de la entradas.  Para `substr` la longitud de la salida  es como la longitud de la primera entrada:


```{r}
svm <- c(
  " Una SVM construye un hiperplano o conjunto de hiperplanos en un espacio de dimensionalidad
    muy alta (o incluso infinita) que puede ser utilizado en problemas de clasificación y regresion",
  " Los árboles de decisión son muy utilizados a la hora de analizar la toma de decisiones de individuos",
  " Una red bayesiana, es un modelo probabilístico que representa una serie de variables deazar y sus independencias condicionales a través de un gráfo acíclico dirigido",
  " Clustering, es un procedimiento de agrupación de una serie de vectores de acuerdo con un criterio"
)
substring(svm, 1:6, 10)
```
```{r}
substr(svm, 1:6, 10)
```

La función `paste` y funciones similares combinan cadenas. La función `strsplit` hace lo contrario, divide en puntos especificados las cadenas . En el siguiente ejemplo `fixed = TRUE` significa que el argumento `split` es una cadena fija en lugar de una expresión regular:

```{r}
strsplit(svm, " ", fixed = TRUE)
```


`strsplit` devuelve una lista, esto se debe a que su resultado consiste en vectores de caracteres de longitudes posiblemente diferentes. Cuando sólo pasa una sola cadena como entrada, este hecho es fácil pasar por alto. *Ten cuidado!*.

En nuestro ejemplo, las comillas en algunas palabras son algo molestas, sería mejor dividir en una coma opcional seguido por un espacio. Esto se especifica fácilmente usando una expresión regular. `? ` significa *hacer que el carácter anterior sea opcional*:

```{r}
strsplit(svm, ",? ")
```



### Rutas de archivo


R tiene un directorio de trabajo, que es el lugar predeterminado en el que se leerán o escribirán los archivos. Se puede  ver esa ubicación con `getwd`  y cambiar esa ubicación con `setwd`


```{r}
getwd()
```

De lo anterior da cuenta que los componentes de directorio de cada ruta están separados por barras diagonales, aunque sean rutas de acceso de Windows. Para la portabilidad  en R siempre puede especificar rutas con barras diagonales, y las funciones de manejo de archivos reemplazarán mágicamente con barras diagonales inversas si el sistema operativo las necesita.

La función `basename` devuelve el nombre de un archivo sin la ubicación del directorio anterior. Por el contrario, `dirname` devuelve el nombre del directorio en el que se encuentra un archivo.


```{r}
basename(getwd())
dirname(getwd())
```

